!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("react"));else if("function"==typeof define&&define.amd)define(["react"],e);else{var n="object"==typeof exports?e(require("react")):e(t.react);for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(window,function(t){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=6)}([function(e,n){e.exports=t},function(t,e,n){t.exports=n(11)()},function(t,e,n){var i;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var t=[],e=0;e<arguments.length;e++){var i=arguments[e];if(i){var o=typeof i;if("string"===o||"number"===o)t.push(i);else if(Array.isArray(i)&&i.length){var a=r.apply(null,i);a&&t.push(a)}else if("object"===o)for(var s in i)n.call(i,s)&&i[s]&&t.push(s)}}return t.join(" ")}t.exports?(r.default=r,t.exports=r):void 0===(i=function(){return r}.apply(e,[]))||(t.exports=i)}()},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){var n=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some(function(t,i){return t[0]===e&&(n=i,!0)}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(e,n){var i=t(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,i=t(n,e);~i&&n.splice(i,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];t.call(e,r[1],r[0])}},e}()}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,r=void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),o="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},a=2;var s=20,c=["top","right","bottom","left","width","height","size","weight"],u="undefined"!=typeof MutationObserver,h=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,i=!1,r=0;function s(){n&&(n=!1,t()),i&&u()}function c(){o(s)}function u(){var t=Date.now();if(n){if(t-r<a)return;i=!0}else n=!0,i=!1,setTimeout(c,e);r=t}return u}(this.refresh.bind(this),s)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},t.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;c.some(function(t){return!!~n.indexOf(t)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),l=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},d=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||r},f=_(0,0,0,0);function p(t){return parseFloat(t)||0}function v(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(e,n){return e+p(t["border-"+n+"-width"])},0)}function y(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return f;var i=d(t).getComputedStyle(t),r=function(t){for(var e={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var r=i[n],o=t["padding-"+r];e[r]=p(o)}return e}(i),o=r.left+r.right,a=r.top+r.bottom,s=p(i.width),c=p(i.height);if("border-box"===i.boxSizing&&(Math.round(s+o)!==e&&(s-=v(i,"left","right")+o),Math.round(c+a)!==n&&(c-=v(i,"top","bottom")+a)),!function(t){return t===d(t).document.documentElement}(t)){var u=Math.round(s+o)-e,h=Math.round(c+a)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(h)&&(c-=h)}return _(r.left,r.top,s,c)}var m="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof d(t).SVGGraphicsElement}:function(t){return t instanceof d(t).SVGElement&&"function"==typeof t.getBBox};function g(t){return i?m(t)?function(t){var e=t.getBBox();return _(0,0,e.width,e.height)}(t):y(t):f}function _(t,e,n,i){return{x:t,y:e,width:n,height:i}}var b=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=_(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=g(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),w=function(t,e){var n,i,r,o,a,s,c,u=(i=(n=e).x,r=n.y,o=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(s.prototype),l(c,{x:i,y:r,width:o,height:a,top:r,right:i+o,bottom:a+r,left:i}),c);l(this,{target:t,contentRect:u})},x=function(){function t(t,e,i){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof d(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new b(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof d(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new w(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),E="undefined"!=typeof WeakMap?new WeakMap:new n,O=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=h.getInstance(),i=new x(e,n,this);E.set(this,i)};["observe","unobserve","disconnect"].forEach(function(t){O.prototype[t]=function(){var e;return(e=E.get(this))[t].apply(e,arguments)}});var M=void 0!==r.ResizeObserver?r.ResizeObserver:O;e.a=M}).call(this,n(3))},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(3))},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(0),n(7),n(8),n(9)],void 0===(r=function(t,e,n,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r=c(r);var u=function(t){function e(e){var n=t.call(this,e)||this;return n.subscriptionHandles=[],n.state={alertMessage:"",hasSignature:!1},n.handleSignEnd=function(t){var e=n.props.mxObject;e&&!n.state.hasSignature&&e.set(n.props.hasSignatureAttribute,!0),n.base64Uri=t,t&&n.setState({hasSignature:!0})},n.updateCanvasState=function(){var t=n.props,e=t.mxObject,i=t.hasSignatureAttribute;if(i){var r=!!e&&e.get(i);n.state.hasSignature!==r&&n.setState({hasSignature:r})}},n.resetSubscriptions(e.mxObject),n}return a(e,t),e.prototype.render=function(){return n.createElement(o.Signature,s(s({},this.props),{wrapperStyle:r.default.parseStyle(this.props.style),readOnly:this.isReadOnly(),alertMessage:this.state.alertMessage,clearSignature:this.state.hasSignature,onSignEndAction:this.handleSignEnd,className:this.props.class}))},e.prototype.componentWillReceiveProps=function(t){if(t.mxObject){var e=this.validateProps(t.mxObject);e&&this.setState({alertMessage:e})}},e.prototype.componentDidUpdate=function(){this.resetSubscriptions(this.props.mxObject)},e.prototype.componentDidMount=function(){var t=this;this.formHandle=this.props.mxform.listen("submit",function(e){return t.saveDocument(e)})},e.prototype.componentWillUnmount=function(){this.formHandle&&this.props.mxform.unlisten(this.formHandle),this.subscriptionHandles.forEach(window.mx.data.unsubscribe)},e.prototype.isReadOnly=function(){var t=this.props,e=t.mxObject,n=t.readOnly;return!e||n||e.isReadonlyAttr("Contents")},e.prototype.saveDocument=function(t){this.base64Uri&&this.state.hasSignature&&this.props.mxObject?mx.data.saveDocument(this.props.mxObject.getGuid(),this.generateFileName(this.props.mxObject),{},r.default.convertUrlToBlob(this.base64Uri),t,function(t){return mx.ui.error("Error saving signature: "+t.message)}):t()},e.prototype.generateFileName=function(t){var e=t.get("Name");return e||"signature"+Math.floor(1e6*Math.random())+".png"},e.prototype.validateProps=function(t){var e="";return t&&!t.inheritsFrom("System.Image")&&(e=this.props.friendlyId+": "+t.getEntity()+' does not inherit from "System.Image".'),e},e.prototype.resetSubscriptions=function(t){var e=this;this.subscriptionHandles.forEach(window.mx.data.unsubscribe),this.subscriptionHandles=[],t&&(this.subscriptionHandles.push(window.mx.data.subscribe({guid:t.getGuid(),callback:function(){return e.updateCanvasState()}})),this.subscriptionHandles.push(mx.data.subscribe({guid:t.getGuid(),attr:this.props.hasSignatureAttribute,callback:function(){return e.updateCanvasState()}})))},e}(n.Component);e.default=i.hot(u)}.apply(e,i))||(t.exports=r)},function(t,e,n){e.hot=function(t){return t}},function(t,e,n){var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.parseStyle=function(t){void 0===t&&(t="");try{return t.split(";").reduce(function(t,e){var n=e.split(":");2===n.length&&(t[n[0].trim().replace(/(-.)/g,function(t){return t[1].toUpperCase()})]=n[1].trim());return t},{})}catch(e){window.console.log("Failed to parse style",t,e)}return{}},t.convertUrlToBlob=function(t){for(var e=atob(t.split(";base64,")[1]),n=[],i=0;i<e.length;i+=512){for(var r=e.slice(i,i+512),o=new Array(r.length),a=0;a<r.length;a++)o[a]=r.charCodeAt(a);var s=new Uint8Array(o);n.push(s)}return new Blob(n,{type:"image/png"})},t}();e.default=n}.apply(e,[n,e]))||(t.exports=i)},function(t,e,n){var i,r,o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(0),n(10),n(2),n(17),n(13),n(14),n(15),n(16)],void 0===(r=function(t,e,n,i,r,o,u,h,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i=c(i),r=c(r),o=c(o);var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onResize=function(){if(e.canvasNode){var t=e.signaturePad.toData();e.canvasNode.width=e.canvasNode&&e.canvasNode.parentElement?e.canvasNode.parentElement.offsetWidth:0,e.canvasNode.height=e.canvasNode&&e.canvasNode.parentElement?e.canvasNode.parentElement.offsetHeight:0,e.signaturePad.clear(),e.signaturePad.fromData(t)}},e.handleSignEnd=function(){e.props.onSignEndAction&&e.props.onSignEndAction(e.signaturePad.toDataURL())},e}return a(e,t),e.prototype.render=function(){var t=this,e=this.props,i=e.className,a=e.alertMessage,c=e.wrapperStyle;return n.createElement(l.SizeContainer,s({},this.props,{className:r.default("widget-signature",i),classNameInner:"widget-signature-wrapper form-control mx-textarea-input mx-textarea",style:c}),n.createElement(u.Alert,{bootstrapStyle:"danger"},a),n.createElement(h.Grid,s({},this.props)),n.createElement("canvas",{className:"widget-signature-canvas",ref:function(e){return t.canvasNode=e}}),n.createElement(o.default,{handleWidth:!0,handleHeight:!0,onResize:this.onResize}))},e.prototype.componentDidMount=function(){this.canvasNode&&(this.signaturePad=new i.default(this.canvasNode,s({penColor:this.props.penColor,onEnd:this.handleSignEnd},this.signaturePadOptions())),this.props.readOnly&&this.signaturePad.off())},e.prototype.componentWillReceiveProps=function(t){if(this.signaturePad){var e=this.props,n=e.clearSignature,i=e.readOnly;t.clearSignature!==n&&n&&this.signaturePad.clear(),t.readOnly!==i&&(t.readOnly?this.signaturePad.off():this.signaturePad.on())}},e.prototype.signaturePadOptions=function(){var t={};return"fountain"===this.props.penType?t={minWidth:.6,maxWidth:2.6,velocityFilterWeight:.6}:"ballpoint"===this.props.penType?t={minWidth:1.4,maxWidth:1.5,velocityFilterWeight:1.5}:"marker"===this.props.penType&&(t={minWidth:2,maxWidth:4,velocityFilterWeight:.9}),t},e}(n.PureComponent);e.Signature=d}.apply(e,i))||(t.exports=r)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}
/*!
 * Signature Pad v3.0.0-beta.4 | https://github.com/szimek/signature_pad
 * (c) 2018 Szymon Nowak | Released under the MIT license
 */n.r(e);var a=function(){function t(e,n,r){i(this,t),this.x=e,this.y=n,this.time=r||Date.now()}return o(t,[{key:"distanceTo",value:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time}},{key:"velocityFrom",value:function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0}}]),t}(),s=function(){function t(e,n,r,o,a,s){i(this,t),this.startPoint=e,this.control2=n,this.control1=r,this.endPoint=o,this.startWidth=a,this.endWidth=s}return o(t,[{key:"length",value:function(){for(var t,e,n=0,i=0;i<=10;i+=1){var r=i/10,o=this.point(r,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),a=this.point(r,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){var s=o-t,c=a-e;n+=Math.sqrt(s*s+c*c)}t=o,e=a}return n}},{key:"point",value:function(t,e,n,i,r){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*i*(1-t)*t*t+r*t*t*t}}],[{key:"fromPoints",value:function(e,n){var i=this.calculateControlPoints(e[0],e[1],e[2]).c2,r=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new t(e[1],i,r,e[2],n.start,n.end)}},{key:"calculateControlPoints",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=e.x-n.x,s=e.y-n.y,c=(t.x+e.x)/2,u=(t.y+e.y)/2,h=(e.x+n.x)/2,l=(e.y+n.y)/2,d=Math.sqrt(i*i+r*r),f=Math.sqrt(o*o+s*s),p=f/(d+f),v=h+(c-h)*p,y=l+(u-l)*p,m=e.x-v,g=e.y-y;return{c1:new a(c+m,u+g),c2:new a(h+m,l+g)}}}]),t}();var c=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.canvas=e,this.options=r,this._handleMouseDown=function(t){1===t.which&&(n._mouseButtonDown=!0,n._strokeBegin(t))},this._handleMouseMove=function(t){n._mouseButtonDown&&n._strokeMoveUpdate(t)},this._handleMouseUp=function(t){1===t.which&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(t))},this._handleTouchStart=function(t){if(t.preventDefault(),1===t.targetTouches.length){var e=t.changedTouches[0];n._strokeBegin(e)}},this._handleTouchMove=function(t){t.preventDefault();var e=t.targetTouches[0];n._strokeMoveUpdate(e)},this._handleTouchEnd=function(t){if(t.target===n.canvas){t.preventDefault();var e=t.changedTouches[0];n._strokeEnd(e)}},this.velocityFilterWeight=r.velocityFilterWeight||.7,this.minWidth=r.minWidth||.5,this.maxWidth=r.maxWidth||2.5,this.throttle="throttle"in r?r.throttle:16,this.minDistance="minDistance"in r?r.minDistance:5,this.throttle?this._strokeMoveUpdate=function(t){var e,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,o=0,a=null,s=function(){o=Date.now(),a=null,e=t.apply(n,i),a||(n=null,i=[])};return function(){var c=Date.now(),u=r-(c-o);n=this;for(var h=arguments.length,l=new Array(h),d=0;d<h;d++)l[d]=arguments[d];return i=l,u<=0||u>r?(a&&(clearTimeout(a),a=null),o=c,e=t.apply(n,i),a||(n=null,i=[])):a||(a=window.setTimeout(s,u)),e}}(t.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=t.prototype._strokeUpdate,this.dotSize=r.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=r.penColor||"black",this.backgroundColor=r.backgroundColor||"rgba(0,0,0,0)",this.onBegin=r.onBegin,this.onEnd=r.onEnd,this._ctx=e.getContext("2d"),this.clear(),this.on()}return o(t,[{key:"clear",value:function(){var t=this._ctx,e=this.canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0}},{key:"fromDataURL",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,r=new Image,o=n.ratio||window.devicePixelRatio||1,a=n.width||this.canvas.width/o,s=n.height||this.canvas.height/o;this._reset(),r.onload=function(){e._ctx.drawImage(r,0,0,a,s),i&&i()},r.onerror=function(t){i&&i(t)},r.src=t,this._isEmpty=!1}},{key:"toDataURL",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",e=arguments.length>1?arguments[1]:void 0;switch(t){case"image/svg+xml":return this._toSVG();default:return this.canvas.toDataURL(t,e)}}},{key:"on",value:function(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",window.PointerEvent?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}},{key:"off",value:function(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.removeEventListener("pointerdown",this._handleMouseDown),this.canvas.removeEventListener("pointermove",this._handleMouseMove),document.removeEventListener("pointerup",this._handleMouseUp),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}},{key:"isEmpty",value:function(){return this._isEmpty}},{key:"fromData",value:function(t){var e=this;this.clear(),this._fromData(t,function(t){var n=t.color,i=t.curve;return e._drawCurve({color:n,curve:i})},function(t){var n=t.color,i=t.point;return e._drawDot({color:n,point:i})}),this._data=t}},{key:"toData",value:function(){return this._data}},{key:"_strokeBegin",value:function(t){var e={color:this.penColor,points:[]};"function"==typeof this.onBegin&&this.onBegin(t),this._data.push(e),this._reset(),this._strokeUpdate(t)}},{key:"_strokeUpdate",value:function(t){var e=t.clientX,n=t.clientY,i=this._createPoint(e,n),r=this._data[this._data.length-1],o=r.points,a=o.length>0&&o[o.length-1],s=!!a&&i.distanceTo(a)<=this.minDistance,c=r.color;if(!a||!a||!s){var u=this._addPoint(i);a?u&&this._drawCurve({color:c,curve:u}):this._drawDot({color:c,point:i}),o.push({time:i.time,x:i.x,y:i.y})}}},{key:"_strokeEnd",value:function(t){this._strokeUpdate(t),"function"==typeof this.onEnd&&this.onEnd(t)}},{key:"_handlePointerEvents",value:function(){this._mouseButtonDown=!1,this.canvas.addEventListener("pointerdown",this._handleMouseDown),this.canvas.addEventListener("pointermove",this._handleMouseMove),document.addEventListener("pointerup",this._handleMouseUp)}},{key:"_handleMouseEvents",value:function(){this._mouseButtonDown=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)}},{key:"_handleTouchEvents",value:function(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}},{key:"_reset",value:function(){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor}},{key:"_createPoint",value:function(t,e){var n=this.canvas.getBoundingClientRect();return new a(t-n.left,e-n.top,(new Date).getTime())}},{key:"_addPoint",value:function(t){var e=this._lastPoints;if(e.push(t),e.length>2){3===e.length&&e.unshift(e[0]);var n=this._calculateCurveWidths(e[1],e[2]),i=s.fromPoints(e,n);return e.shift(),i}return null}},{key:"_calculateCurveWidths",value:function(t,e){var n=this.velocityFilterWeight*e.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,i=this._strokeWidth(n),r={end:i,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=i,r}},{key:"_strokeWidth",value:function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)}},{key:"_drawCurveSegment",value:function(t,e,n){var i=this._ctx;i.moveTo(t,e),i.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1}},{key:"_drawCurve",value:function(t){var e=t.color,n=t.curve,i=this._ctx,r=n.endWidth-n.startWidth,o=2*Math.floor(n.length());i.beginPath(),i.fillStyle=e;for(var a=0;a<o;a+=1){var s=a/o,c=s*s,u=c*s,h=1-s,l=h*h,d=l*h,f=d*n.startPoint.x;f+=3*l*s*n.control1.x,f+=3*h*c*n.control2.x,f+=u*n.endPoint.x;var p=d*n.startPoint.y;p+=3*l*s*n.control1.y,p+=3*h*c*n.control2.y,p+=u*n.endPoint.y;var v=Math.min(n.startWidth+u*r,this.maxWidth);this._drawCurveSegment(f,p,v)}i.closePath(),i.fill()}},{key:"_drawDot",value:function(t){var e=t.color,n=t.point,i=this._ctx,r="function"==typeof this.dotSize?this.dotSize():this.dotSize;i.beginPath(),this._drawCurveSegment(n.x,n.y,r),i.closePath(),i.fillStyle=e,i.fill()}},{key:"_fromData",value:function(t,e,n){var i=!0,r=!1,o=void 0;try{for(var s,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value,h=u.color,l=u.points;if(l.length>1)for(var d=0;d<l.length;d+=1){var f=l[d],p=new a(f.x,f.y,f.time);this.penColor=h,0===d&&this._reset();var v=this._addPoint(p);v&&e({color:h,curve:v})}else this._reset(),n({color:h,point:l[0]})}}catch(t){r=!0,o=t}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}}},{key:"_toSVG",value:function(){var t=this,e=this._data,n=Math.max(window.devicePixelRatio||1,1),i=this.canvas.width/n,r=this.canvas.height/n,o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("width",this.canvas.width.toString()),o.setAttribute("height",this.canvas.height.toString()),this._fromData(e,function(t){var e=t.color,n=t.curve,i=document.createElement("path");if(!(isNaN(n.control1.x)||isNaN(n.control1.y)||isNaN(n.control2.x)||isNaN(n.control2.y))){var r="M ".concat(n.startPoint.x.toFixed(3),",").concat(n.startPoint.y.toFixed(3)," ")+"C ".concat(n.control1.x.toFixed(3),",").concat(n.control1.y.toFixed(3)," ")+"".concat(n.control2.x.toFixed(3),",").concat(n.control2.y.toFixed(3)," ")+"".concat(n.endPoint.x.toFixed(3),",").concat(n.endPoint.y.toFixed(3));i.setAttribute("d",r),i.setAttribute("stroke-width",(2.25*n.endWidth).toFixed(3)),i.setAttribute("stroke",e),i.setAttribute("fill","none"),i.setAttribute("stroke-linecap","round"),o.appendChild(i)}},function(e){var n=e.color,i=e.point,r=document.createElement("circle"),a="function"==typeof t.dotSize?t.dotSize():t.dotSize;r.setAttribute("r",a.toString()),r.setAttribute("cx",i.x.toString()),r.setAttribute("cy",i.y.toString()),r.setAttribute("fill",n),o.appendChild(r)});var a='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+' viewBox="'.concat(0," ").concat(0," ").concat(i," ").concat(r,'"')+' width="'.concat(i,'"')+' height="'.concat(r,'"')+">",s=o.innerHTML;if(void 0===s){var c=document.createElement("dummy"),u=o.childNodes;c.innerHTML="";for(var h=0;h<u.length;h+=1)c.appendChild(u[h].cloneNode(!0));s=c.innerHTML}return"data:image/svg+xml;base64,"+btoa(a+s+"</svg>")}}]),t}();e.default=c},function(t,e,n){"use strict";var i=n(12);function r(){}function o(){}o.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,o,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){var i,r,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(0),n(2)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i=o(i),e.Alert=function(t){var e=t.bootstrapStyle,r=t.className,o=t.children;return o?n.createElement("div",{className:i.default("alert alert-"+e,r)},o):null},e.Alert.displayName="Alert",e.Alert.defaultProps={bootstrapStyle:"danger"}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n,e,n(0)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Grid=function(t){var e=t.gridCellWidth,i=t.gridCellHeight,r=t.gridBorderColor,o=t.gridBorderWidth,a=t.showGrid,s="grid"+Math.floor(1e6*Math.random());return a?n.createElement("svg",{className:"widget-signature-grid",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},n.createElement("defs",null,n.createElement("pattern",{id:s,width:e,height:i,patternUnits:"userSpaceOnUse"},n.createElement("line",{x1:"0",y1:i,x2:e,y2:i,stroke:r,strokeWidth:o}),n.createElement("line",{x1:e,y1:"0",x2:e,y2:i,stroke:r,strokeWidth:o}))),n.createElement("rect",{width:"100%",height:"100%",fill:"url(#"+s+")"})):null},e.Grid.displayName="Grid",e.Grid.defaultProps={showGrid:!0}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(0),n(2)],void 0===(r=function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i=a(i),e.SizeContainer=function(t){var e=t.className,a=t.classNameInner,s=t.widthUnit,c=t.width,u=t.heightUnit,h=t.height,l=t.children,d=t.style,f=t.readOnly,p="percentage"===s?c+"%":c+"px";return n.createElement("div",{className:i.default(e,"size-box"),style:o(o({position:"relative",width:p},r(u,h,s,c)),d)},n.createElement("div",{className:i.default("size-box-inner",a),readOnly:f,disabled:f,style:{position:"absolute",top:"0",right:"0",bottom:"0",left:"0"}},l))},e.SizeContainer.displayName="SizeContainer",e.SizeContainer.defaultProps={readOnly:!1};var r=function(t,e,n,i){var r={};if("percentageOfWidth"===t){var o=e/100*i;"percentage"===n?(r.height="auto",r.paddingBottom=o+"%"):r.height=o+"px"}else"pixels"===t?r.height=e+"px":"percentageOfParent"===t&&(r.height=e+"%");return r}}.apply(e,i))||(t.exports=r)},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var i=n(0),r=n.n(i),o=n(1),a=n.n(o),s=n(4);var c=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},u=n(5),h="object"==typeof self&&self&&self.Object===Object&&self,l=u.a||h||Function("return this")(),d=function(){return l.Date.now()},f=l.Symbol,p=Object.prototype,v=p.hasOwnProperty,y=p.toString,m=f?f.toStringTag:void 0;var g=function(t){var e=v.call(t,m),n=t[m];try{t[m]=void 0;var i=!0}catch(t){}var r=y.call(t);return i&&(e?t[m]=n:delete t[m]),r},_=Object.prototype.toString;var b=function(t){return _.call(t)},w="[object Null]",x="[object Undefined]",E=f?f.toStringTag:void 0;var O=function(t){return null==t?void 0===t?x:w:E&&E in Object(t)?g(t):b(t)};var M=function(t){return null!=t&&"object"==typeof t},S="[object Symbol]";var P=function(t){return"symbol"==typeof t||M(t)&&O(t)==S},k=NaN,j=/^\s+|\s+$/g,T=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,D=/^0o[0-7]+$/i,W=parseInt;var C=function(t){if("number"==typeof t)return t;if(P(t))return k;if(c(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=c(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(j,"");var n=A.test(t);return n||D.test(t)?W(t.slice(2),n?2:8):T.test(t)?k:+t},R="Expected a function",N=Math.max,z=Math.min;var F=function(t,e,n){var i,r,o,a,s,u,h=0,l=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError(R);function v(e){var n=i,o=r;return i=r=void 0,h=e,a=t.apply(o,n)}function y(t){var n=t-u;return void 0===u||n>=e||n<0||f&&t-h>=o}function m(){var t=d();if(y(t))return g(t);s=setTimeout(m,function(t){var n=e-(t-u);return f?z(n,o-(t-h)):n}(t))}function g(t){return s=void 0,p&&i?v(t):(i=r=void 0,a)}function _(){var t=d(),n=y(t);if(i=arguments,r=this,u=t,n){if(void 0===s)return function(t){return h=t,s=setTimeout(m,e),l?v(t):a}(u);if(f)return clearTimeout(s),s=setTimeout(m,e),v(u)}return void 0===s&&(s=setTimeout(m,e)),a}return e=C(e)||0,c(n)&&(l=!!n.leading,o=(f="maxWait"in n)?N(C(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),_.cancel=function(){void 0!==s&&clearTimeout(s),h=0,i=u=r=s=void 0},_.flush=function(){return void 0===s?a:g(d())},_},U="Expected a function";var L=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new TypeError(U);return c(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),F(t,e,{leading:i,maxWait:e,trailing:r})},H="[object AsyncFunction]",B="[object Function]",I="[object GeneratorFunction]",G="[object Proxy]";var q=function(t){if(!c(t))return!1;var e=O(t);return e==B||e==I||e==H||e==G};function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function J(t,e,n){return e&&X(t.prototype,e),n&&X(t,n),t}function K(t,e){return!e||"object"!==V(e)&&"function"!=typeof e?et(t):e}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Z(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}function tt(t,e){return(tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"withResizeDetector",function(){return at});var it={debounce:F,throttle:L},rt={position:"absolute",width:0,height:0,visibility:"hidden",display:"none"};var ot=function(t){function e(t){var n;Y(this,e),nt(et(et(n=K(this,Q(e).call(this,t)))),"getElement",function(){var t=n.props.resizableElementId,e=t&&document.getElementById(t),i=n.el&&n.el.parentElement;return e||i}),nt(et(et(n)),"createResizeHandler",function(t){var e=n.props,i=e.handleWidth,r=e.handleHeight,o=e.onResize;t.forEach(function(t){var e=t.contentRect,a=e.width,s=e.height,c=i&&n.state.width!==a,u=r&&n.state.height!==s;n.skipOnMount||!c&&!u||"undefined"==typeof window||(n.animationFrameID=window.requestAnimationFrame(function(){o(a,s),n.setState({width:a,height:s})})),n.skipOnMount=!1})}),nt(et(et(n)),"handleRenderProp",function(){var t=n.state,e=t.width,r=t.height,o=n.props.render;if(o&&"function"==typeof o)return Object(i.cloneElement)(o({width:e,height:r}),{key:"render"})}),nt(et(et(n)),"renderChildren",function(){var t=n.state,e=t.width,r=t.height;return function(t){return t?Array.isArray(t)?t:[t]:[]}(n.props.children).filter(function(t){return!!t}).map(function(t,n){return q(t)?Object(i.cloneElement)(t(e,r),{key:n}):Object(i.isValidElement)(t)?Object(i.cloneElement)(t,{width:e,height:r,key:n}):t})});var r=t.skipOnMount,o=t.refreshMode,a=t.refreshRate,c=t.refreshOptions;return n.state={width:void 0,height:void 0},n.skipOnMount=r,n.animationFrameID=null,n.resizeHandler=it[o]?it[o](n.createResizeHandler,a,c):n.createResizeHandler,n.ro=new s.a(n.resizeHandler),n}return Z(e,i["PureComponent"]),J(e,[{key:"componentDidMount",value:function(){var t=this.getElement();t&&this.ro.observe(t)}},{key:"componentWillUnmount",value:function(){var t=this.getElement();t&&this.ro.unobserve(t),"undefined"!=typeof window&&this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeHandler&&this.resizeHandler.cancel&&this.resizeHandler.cancel()}},{key:"render",value:function(){var t=this,e=this.props.nodeType;return[Object(i.createElement)(e,{key:"resize-detector",style:rt,ref:function(e){t.el=e}}),this.handleRenderProp()].concat($(this.renderChildren()))}}]),e}();ot.propTypes={handleWidth:a.a.bool,handleHeight:a.a.bool,skipOnMount:a.a.bool,refreshRate:a.a.number,refreshMode:a.a.string,refreshOptions:a.a.shape({leading:a.a.bool,trailing:a.a.bool}),resizableElementId:a.a.string,onResize:a.a.func,render:a.a.func,children:a.a.any,nodeType:a.a.node},ot.defaultProps={handleWidth:!1,handleHeight:!1,skipOnMount:!1,refreshRate:1e3,refreshMode:void 0,refreshOptions:void 0,resizableElementId:"",onResize:function(t){return t},render:void 0,children:null,nodeType:"div"};var at=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handleWidth:!0,handleHeight:!0};return function(n){function o(){return Y(this,o),K(this,Q(o).apply(this,arguments))}return Z(o,i["Component"]),J(o,[{key:"render",value:function(){return r.a.createElement(ot,e,r.a.createElement(t,this.props))}}]),o}()};e.default=ot}])});